{%- comment %}

  -----------------------------------------------------------------------------
  Content Card
  -----------------------------------------------------------------------------

  Used to display an image over text content on a grid. Useful for content
  other than blog articles or products.

  Dependencies:

  Liquid:

  - Image Object - `snippets/image-object.liquid`
  - Eyebrow Element - `snippets/eyebrow-element.liquid`
  - Heading Element - `snippets/heading-element`
  - Paragraph Element - `snippets/paragraph-element`
  - Link Element - `snippets/link-element`

  Styling:

  - `ec-base-styles.scss.liquid`

  JavaScript:

  - None

  Usage:

  {% render 'content-card',
    id: { string } - required for background image & color
    content_color: { string } - optional
    content_align: { string } - optional
    content_align_md_up: { string } - optional
    image_url: { string } - optional
    image_url_md_up: { string } - optional
    image_alt_text: { string } - optional
    image_aspect_ratio: { string } - optional
    image_object_fit: { string} - optional
    eyebrow_text: { string } - optional
    eyebrow_style: { string } - optional
    heading_text: { string } - optional
    heading_size: { string } - optional
    heading_style: { string } - optional
    paragraph_text: { string } - optional
    link_style: { string } - optional
    link_url: { string } - optional
    link_text: { string } - optional
    link_block: { boolean } - optional
    pt: { string } - optional
    pr: { string } - optional
    pb: { string } - optional
    pl: { string } - optional
    mt: { string } - optional
    mr: { string } - optional
    mb: { string } - optional
    ml: { string } - optional
    pt_md_up: { string } - optional
    pr_md_up: { string } - optional
    pb_md_up: { string } - optional
    pl_md_up: { string } - optional
    mt_md_up: { string } - optional
    mr_md_up: { string } - optional
    mb_md_up: { string } - optional
    ml_md_up: { string } - optional
    bg_image_url: { string } - optional
    bg_image_url: { string } - optional
    bg_image_url: { string } - optional
    bg_image_ur: { string } - optional
    content_pt: { string } - optional
    content_pr: { string } - optional
    content_pb: { string } - optional
    content_pl: { string } - optional
    content_mt: { string } - optional
    content_mr: { string } - optional
    content_mb: { string } - optional
    content_ml: { string } - optional
    content_pt_md_up: { string } - optional
    content_pr_md_up: { string } - optional
    content_pb_md_up: { string } - optional
    content_pl_md_up: { string } - optional
    content_mt_md_up: { string } - optional
    content_mr_md_up: { string } - optional
    content_mb_md_up: { string } - optional
    content_ml_md_up: { string } - optional
    content_bg_image_url: { string } - optional
    content_bg_image_url_md_up: { string } - optional
    content_bg_color: { string } - optional
    content_bg_color_alpha: { string } - optional
    content_embed: { boolean } - optional
    content_aspect_ratio: { string } - optional
    content_embed_forced: { string } - optional - If you would like to force
    the content block to always be enabled
    content_position: { string } - optional
    content_position_md_up: { string } - optional
    content_align_items: { string } - optional
    content_align_items_md_up: { string } - optional
  %}

{% endcomment -%}

{% if content_pt != blank %}
  {% assign content_pt = content_pt %}
{% else %}
  {% assign content_pt = 0 %}
{% endif %}

{% if content_pr != blank %}
  {% assign content_pr = content_pr %}
{% else %}
  {% assign content_pr = 0 %}
{% endif %}

{% if content_pb != blank %}
  {% assign content_pb = content_pb %}
{% else %}
  {% assign content_pb = 0 %}
{% endif %}

{% if content_pl != blank %}
  {% assign content_pl = content_pl %}
{% else %}
  {% assign content_pl = 0 %}
{% endif %}

{% if content_mt != blank %}
  {% assign content_mt = content_mt %}
{% else %}
  {% assign content_mt = 0 %}
{% endif %}

{% if content_mr != blank %}
  {% assign content_mr = content_mr %}
{% else %}
  {% assign content_mr = 0 %}
{% endif %}

{% if content_mb != blank %}
  {% assign content_mb = content_mb %}
{% else %}
  {% assign content_mb = 0 %}
{% endif %}

{% if content_ml != blank %}
  {% assign content_ml = content_ml %}
{% else %}
  {% assign content_ml = 0 %}
{% endif %}

{% if content_pt_md_up != blank %}
  {% assign content_pt_md_up = content_pt_md_up %}
{% else %}
  {% assign content_pt_md_up = 0 %}
{% endif %}

{% if content_pr_md_up != blank %}
  {% assign content_pr_md_up = content_pr_md_up %}
{% else %}
  {% assign content_pr_md_up = 0 %}
{% endif %}

{% if content_pb_md_up != blank %}
  {% assign content_pb_md_up = content_pb_md_up %}
{% else %}
  {% assign content_pb_md_up = 0 %}
{% endif %}

{% if content_pl_md_up != blank %}
  {% assign content_pl_md_up = content_pl_md_up %}
{% else %}
  {% assign content_pl_md_up = 0 %}
{% endif %}

{% if content_mt_md_up != blank %}
  {% assign content_mt_md_up = content_mt_md_up %}
{% else %}
  {% assign content_mt_md_up = 0 %}
{% endif %}

{% if content_mr_md_up != blank %}
  {% assign content_mr_md_up = content_mr_md_up %}
{% else %}
  {% assign content_mr_md_up = 0 %}
{% endif %}

{% if content_mb_md_up != blank %}
  {% assign content_mb_md_up = content_mb_md_up %}
{% else %}
  {% assign content_mb_md_up = 0 %}
{% endif %}

{% if content_ml_md_up != blank %}
  {% assign content_ml_md_up = content_ml_md_up %}
{% else%}
  {% assign content_ml_md_up= 0 %}
{% endif %}

{% comment %} Also need to copy border settings to content card where applicapble {% endcomment %}

{% comment %} Position the card based upon content_position {% endcomment %}
{% comment %} Small Devices {% endcomment %}
{% if content_position == 'top' %}
  {% assign flex_classes =  settings.ec_prefix | append: 'flex-column-reverse' %}
  {% assign img_col = settings.ec_prefix | append: 'col-12' %}
  {% assign content_col = settings.ec_prefix | append: 'col-12' %}
  {% assign embed_content = true %}
{% elsif content_position == 'right' %}
  {% assign flex_classes =  settings.ec_prefix | append: 'flex-row' %}
  {% assign img_col =  settings.ec_prefix | append: 'col-6' %}
  {% assign content_col =  settings.ec_prefix | append: 'col-6' %}
  {% assign embed_content = true %}
{% elsif content_position == 'bottom' %}
  {% assign flex_classes =  settings.ec_prefix | append: 'flex-column' %}
  {% assign img_col =  settings.ec_prefix | append: 'col-12' %}
  {% assign content_col =  settings.ec_prefix | append: 'col-12' %}
  {% if embed_content != blank or embed_content != 'none' %}
    {% assign embed_content = embed_content %}
  {% else %}
    {% assign embed_content = false %}
  {% endif %}
{% elsif content_position == 'left' %}
  {% assign flex_classes =  settings.ec_prefix | append: 'flex-row-reverse' %}
  {% assign img_col =  settings.ec_prefix | append: 'col-6' %}
  {% assign content_col =  settings.ec_prefix | append: 'col-6' %}
  {% assign embed_content = true %}
{% endif %}

{% comment %} Large Devices {% endcomment %}
{% if content_position_md_up == 'top' %}
  {% assign flex_classes_md_up =  settings.ec_prefix | append: 'flex-md-column-reverse' %}
  {% assign img_col_md_up =  settings.ec_prefix | append: 'col-md-12' %}
  {% assign content_col_md_up =  settings.ec_prefix | append: 'col-md-12' %}
{% elsif content_position_md_up == 'right' %}
  {% assign flex_classes_md_up =  settings.ec_prefix | append: 'flex-md-row' %}
  {% assign img_col_md_up =  settings.ec_prefix | append: 'col-md-6' %}
  {% assign content_col_md_up =  settings.ec_prefix | append: 'col-md-6' %}
{% elsif content_position_md_up == 'bottom' %}
  {% assign flex_classes_md_up =  settings.ec_prefix | append: 'flex-md-column' %}
  {% assign img_col_md_up =  settings.ec_prefix | append: 'col-md-12' %}
  {% assign content_col_md_up =  settings.ec_prefix | append: 'col-md-12' %}
{% elsif content_position_md_up == 'left' %}
  {% assign flex_classes_md_up =  settings.ec_prefix | append: 'flex-md-row-reverse' %}
  {% assign img_col_md_up =  settings.ec_prefix | append: 'col-md-6' %}
  {% assign content_col_md_up =  settings.ec_prefix | append: 'col-md-6' %}
{% endif %}

{% if content_embed_forced == true %}
  {% assign embed_content = true %}
{% endif %}

{% assign content_classes =  settings.ec_prefix | append: 'd-flex' %}
{% assign content_classes = content_classes
  | append: ' '
  | append: flex_classes %}

{% assign content_classes = content_classes
  | append: ' '
  | append: flex_classes_md_up %}

{% assign img_col_classes = img_col %}
{% assign img_col_classes = img_col_classes
  | append: ' '
  | append: img_col_md_up %}

{% assign content_col_classes = content_col %}
{% assign content_col_classes = content_col_classes
  | append: ' '
  | append: content_col_md_up %}

{% if content_position == 'bottom' %}
  {% assign img_col_classes = img_col_classes
    | append: ' '
    | append:  settings.ec_prefix
    | append:  'mb-3'
    | append: ' '
    | append:  settings.ec_prefix
    | append: 'px-0' %}
  {% assign content_col_classes = content_col_classes
    | append: ' '
    | append:  settings.ec_prefix
    | append: ' px-0' %}
{% elsif content_position == 'top' %}
  {% assign content_col_classes = content_col_classes
    | append: ' '
    | append:  settings.ec_prefix
    | append:  'mb-3'
    | append: ' '
    | append:  settings.ec_prefix
    | append: 'mb-md-0' %}
{% else %}
  {% assign img_col_classes = img_col_classes
    | append: ' '
    | append:  settings.ec_prefix
    | append: 'mb-0' %}
{% endif %}

{% if content_position_md_up == 'bottom' %}
  {% assign img_col_classes = img_col_classes
    | append: ' '
    | append:  settings.ec_prefix
    | append:  'mb-md-3'
    | append: ' '
    | append:  settings.ec_prefix
    | append: 'px-0' %}
  {% assign content_col_classes = content_col_classes
    | append: ' '
    | append:  settings.ec_prefix
    | append: 'px-md-0' %}
{% elsif content_position_md_up == 'top' %}
  {% assign img_col_classes = img_col_classes
    | append: ' '
    | append:  settings.ec_prefix
    | append: 'mb-md-0' %}
  {% assign content_col_classes = content_col_classes
    | append: ' '
    | append:  settings.ec_prefix
    | append: 'mb-md-3' %}
{% else %}
  {% assign img_col_classes = img_col_classes
    | append: ' '
    | append:  settings.ec_prefix
    | append: 'mb-md-0' %}
{% endif %}

{% capture image_object %}
  {% render 'image-object'
    image_url: image_url,
    image_url_md_up: image_url_md_up,
    image_alt_text: image_alt_text,
    aspect_ratio: image_aspect_ratio,
    aspect_ratio_md_up: image_aspect_ratio_md_up,
    object_fit: image_object_fit %}
{% endcapture %}

{% capture content_object %}
  {% capture raw_content_object %}
    {% render 'content-object'
      content_color: content_color,
      content_align: content_align,
      content_align_md_up: content_align_md_up,
      eyebrow_style: eyebrow_style,
      eyebrow_text: eyebrow_text,
      heading_text: heading_text,
      heading_size: heading_size,
      heading_style: heading_style,
      paragraph_text: paragraph_text,
      link_style: link_style,
      link_size: link_size,
      link_url: link_url,
      link_text: link_text,
      link_block: link_block
    %}
  {% endcapture %}
  {% render 'content-wrapper'
    content: raw_content_object,
    pt: content_pt,
    pr: content_pr,
    pb: content_pb,
    pl: content_pl,
    mt: content_mt,
    mr: content_mr,
    mb: content_mb,
    ml: content_ml,
    pt_md_up: content_pt_md_up,
    pr_md_up: content_pr_md_up,
    pb_md_up: content_pb_md_up,
    pl_md_up: content_pl_md_up,
    mt_md_up: content_mt_md_up,
    mr_md_up: content_mr_md_up,
    mb_md_up: content_mb_md_up,
    ml_md_up: content_ml_md_up,
 %}
{% endcapture %}
{% capture content %}
  {% if embed_content == true and content_aspect_ratio != 'none' %}
    {% render 'embed-object',
      id: id,
      aspect_ratio: content_aspect_ratio,
      content: content_object,
      align_items: content_align_items
      align_items_md_up: content_align_items_md_up,
      bg_image_url: content_bg_image_url,
      bg_image_url_md_up: content_bg_image_url_md_up,
      bg_color: content_bg_color,
      bg_color_alpha: content_bg_color_alpha %}
  {% else %}
    {{ content_object }}
  {% endif %}
{% endcapture %}

{% capture composed_content %}
  <div class="{{ content_classes }}">
    {% if image_object != blank %}
      <div class="{{ img_col_classes }}">
        {{ image_object }}
      </div>
    {% endif %}
    {% if content != blank %}
      <div class="{{ content_col_classes }}">
        {{ content }}
      </div>
    {% endif %}
  </div>
{% endcapture %}

{% if content != blank or image_object != blank %}
  {% render 'content-wrapper'
    id: id,
    content: composed_content,
    pt: pt,
    pr: pr,
    pb: pb,
    pl: pl,
    mt: mt,
    mr: mr,
    mb: mb,
    ml: ml,
    pt_md_up: pt_md_up,
    pr_md_up: pr_md_up,
    pb_md_up: pb_md_up,
    pl_md_up: pl_md_up,
    mt_md_up: mt_md_up,
    mr_md_up: mr_md_up,
    mb_md_up: mb_md_up,
    ml_md_up: ml_md_up,
    bg_image_url: bg_image_url,
    bg_image_url_md_up: bg_image_url_md_up,
    bg_color: bg_color,
    bg_color_alpha: bg_color_alpha %}
{% endif %}
